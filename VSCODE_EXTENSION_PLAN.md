# VS Code Extension êµ¬í˜„ ê³„íš

AI Coding Agentë¥¼ VS Codeì—ì„œ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Extension êµ¬í˜„ ê³„íšì…ë‹ˆë‹¤.

---

## ğŸ¯ ëª©í‘œ

**ì‚¬ìš©ìê°€ VS Codeì—ì„œ:**
1. íŒŒì¼ì„ ì„ íƒí•˜ê³  "AI Agentë¡œ ìˆ˜ì •" ëª…ë ¹ ì‹¤í–‰
2. ì„œë²„ì˜ AI Agentê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì½”ë“œ ë¶„ì„ ë° ìˆ˜ì •
3. ìˆ˜ì • ë‚´ìš©ì„ VS Codeì—ì„œ ë°”ë¡œ í™•ì¸ ë° ì ìš©

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     VS Code (í´ë¼ì´ì–¸íŠ¸ PC)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  VS Code Extension               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ UI Panel â”‚   â”‚ File Watcherâ”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚       â”‚                 â”‚        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚   WebSocket Client         â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ WebSocket (ì‹¤ì‹œê°„ í†µì‹ )
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ì„œë²„ (Docker Container)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FastAPI Backend                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ WebSocket Handler           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - íŒŒì¼ ìˆ˜ì‹ /ì „ì†¡            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°    â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚            â”‚                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Session Manager             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - í´ë¼ì´ì–¸íŠ¸ë³„ workspace    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - íŒŒì¼ ë™ê¸°í™”               â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚            â”‚                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Agent Orchestrator          â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  (ê¸°ì¡´ ì‹œìŠ¤í…œ)               â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Phase 1: ì„œë²„ í™•ì¥ (Week 1)

### 1.1 Session Manager êµ¬í˜„

**íŒŒì¼**: `src/agent/session_manager.py`

```python
class ClientSession:
    """í´ë¼ì´ì–¸íŠ¸ ì„¸ì…˜ ê´€ë¦¬"""
    session_id: str
    workspace_path: Path  # ì„ì‹œ workspace
    files: Dict[str, str]  # íŒŒì¼ëª… -> ë‚´ìš©
    last_activity: datetime

class SessionManager:
    """ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ ì„¸ì…˜ ê´€ë¦¬"""
    def create_session(client_id: str) -> ClientSession
    def get_session(session_id: str) -> ClientSession
    def update_file(session_id: str, file_path: str, content: str)
    def get_file(session_id: str, file_path: str) -> str
    def cleanup_expired_sessions()  # 30ë¶„ í›„ ìë™ ì‚­ì œ
```

**ê¸°ëŠ¥:**
- ê° í´ë¼ì´ì–¸íŠ¸ë§ˆë‹¤ ê²©ë¦¬ëœ ì„ì‹œ workspace ìƒì„±
- íŒŒì¼ ë²„ì „ ê´€ë¦¬ (ë³€ê²½ ì „/í›„ ë¹„êµ)
- ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ (30ë¶„ ë¹„í™œë™ ì‹œ ì‚­ì œ)

### 1.2 WebSocket API í™•ì¥

**íŒŒì¼**: `src/routes/vscode.py`

**ìƒˆ ì—”ë“œí¬ì¸íŠ¸:**
```python
@router.websocket("/ws/vscode/{session_id}")
async def vscode_websocket(websocket: WebSocket, session_id: str):
    """VS Code Extensionìš© WebSocket"""

    # ë©”ì‹œì§€ íƒ€ì…:
    # 1. file_upload: í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„
    # 2. file_download: ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸
    # 3. agent_request: ì‘ì—… ìš”ì²­
    # 4. agent_event: ì‹¤ì‹œê°„ ì´ë²¤íŠ¸
    # 5. diff: ë³€ê²½ ì‚¬í•­ (unified diff format)
```

**í”„ë¡œí† ì½œ ë©”ì‹œì§€:**
```json
// 1. íŒŒì¼ ì—…ë¡œë“œ
{
  "type": "file_upload",
  "files": [
    {"path": "src/main.py", "content": "..."},
    {"path": "tests/test.py", "content": "..."}
  ]
}

// 2. Agent ìš”ì²­
{
  "type": "agent_request",
  "user_request": "src/main.pyì— íƒ€ì… íŒíŠ¸ ì¶”ê°€",
  "context": {
    "active_file": "src/main.py",
    "selection": {"start": 10, "end": 20}
  }
}

// 3. Agent ì´ë²¤íŠ¸ (ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸)
{
  "type": "agent_event",
  "event": {
    "type": "action_start",
    "tool": "edit_file",
    "params": {"path": "src/main.py"}
  }
}

// 4. ë³€ê²½ ì‚¬í•­ (ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸)
{
  "type": "file_changed",
  "path": "src/main.py",
  "diff": "--- a/src/main.py\n+++ b/src/main.py\n...",
  "content": "..."  // ì „ì²´ ë‚´ìš©
}

// 5. ì™„ë£Œ
{
  "type": "task_completed",
  "result": {
    "files_modified": ["src/main.py"],
    "message": "íƒ€ì… íŒíŠ¸ ì¶”ê°€ ì™„ë£Œ"
  }
}
```

### 1.3 íŒŒì¼ ë™ê¸°í™” ë„êµ¬

**ìƒˆ ë„êµ¬**: `src/agent/tools/sync_tools.py`

```python
class SyncFileTool(BaseTool):
    """ì„¸ì…˜ íŒŒì¼ ì½ê¸°/ì“°ê¸°"""

    async def execute(self, params):
        # session_idë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ë³„ íŒŒì¼ ì ‘ê·¼
        session = session_manager.get_session(params["session_id"])
        file_content = session.get_file(params["path"])
        return file_content

class DiffTool(BaseTool):
    """ë³€ê²½ ì‚¬í•­ì„ unified diffë¡œ ìƒì„±"""

    async def execute(self, params):
        old_content = params["old_content"]
        new_content = params["new_content"]
        diff = unified_diff(old_content, new_content)
        return diff
```

---

## ğŸ“‹ Phase 2: VS Code Extension ê°œë°œ (Week 2-3)

### 2.1 í”„ë¡œì íŠ¸ êµ¬ì¡°

```
vscode-extension/
â”œâ”€â”€ package.json          # Extension ë©”íƒ€ë°ì´í„°
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extension.ts      # Entry point
â”‚   â”œâ”€â”€ connection.ts     # WebSocket ì—°ê²°
â”‚   â”œâ”€â”€ fileSync.ts       # íŒŒì¼ ë™ê¸°í™”
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ panel.ts      # Side panel UI
â”‚   â”‚   â”œâ”€â”€ statusBar.ts  # ìƒíƒœ í‘œì‹œ
â”‚   â”‚   â””â”€â”€ diffView.ts   # Diff ë·°ì–´
â”‚   â””â”€â”€ commands/
â”‚       â”œâ”€â”€ askAgent.ts   # "Ask AI Agent"
â”‚       â”œâ”€â”€ applyChanges.ts
â”‚       â””â”€â”€ settings.ts
â”œâ”€â”€ webview/              # UI (React)
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ app.tsx
â”‚   â””â”€â”€ components/
â””â”€â”€ resources/
    â””â”€â”€ icons/
```

### 2.2 í•µì‹¬ ê¸°ëŠ¥

#### 2.2.1 ì—°ê²° ê´€ë¦¬

**íŒŒì¼**: `src/connection.ts`

```typescript
export class AgentConnection {
  private ws: WebSocket;
  private sessionId: string;

  async connect(serverUrl: string): Promise<void> {
    // WebSocket ì—°ê²°
    this.sessionId = uuid();
    this.ws = new WebSocket(`${serverUrl}/ws/vscode/${this.sessionId}`);

    this.ws.onmessage = (event) => {
      const message = JSON.parse(event.data);
      this.handleMessage(message);
    };
  }

  async uploadFiles(files: FileInfo[]): Promise<void> {
    // í˜„ì¬ workspaceì˜ íŒŒì¼ë“¤ì„ ì„œë²„ë¡œ ì „ì†¡
    this.ws.send(JSON.stringify({
      type: "file_upload",
      files: files
    }));
  }

  async requestAgent(userRequest: string, context: any): Promise<void> {
    this.ws.send(JSON.stringify({
      type: "agent_request",
      user_request: userRequest,
      context: context
    }));
  }

  private handleMessage(message: any): void {
    switch (message.type) {
      case "agent_event":
        this.onAgentEvent(message.event);
        break;
      case "file_changed":
        this.onFileChanged(message);
        break;
      case "task_completed":
        this.onTaskCompleted(message.result);
        break;
    }
  }
}
```

#### 2.2.2 UI Panel

**íŒŒì¼**: `src/ui/panel.ts`

```typescript
export class AgentPanel {
  private panel: vscode.WebviewPanel;

  constructor(private connection: AgentConnection) {
    // Side panel ìƒì„±
    this.panel = vscode.window.createWebviewPanel(
      'aiAgentPanel',
      'AI Coding Agent',
      vscode.ViewColumn.Two,
      { enableScripts: true }
    );

    // React UI ë¡œë“œ
    this.panel.webview.html = this.getWebviewContent();
  }

  // ì‚¬ìš©ì ì…ë ¥ ë°›ê¸°
  async askAgent(): Promise<void> {
    const userRequest = await vscode.window.showInputBox({
      prompt: "AI Agentì—ê²Œ ìš”ì²­í•  ì‘ì—…ì„ ì…ë ¥í•˜ì„¸ìš”",
      placeHolder: "ì˜ˆ: ì´ í•¨ìˆ˜ì— íƒ€ì… íŒíŠ¸ë¥¼ ì¶”ê°€í•´ì¤˜"
    });

    if (userRequest) {
      // í˜„ì¬ í™œì„± íŒŒì¼ê³¼ ì„ íƒ ì˜ì—­ ì „ë‹¬
      const editor = vscode.window.activeTextEditor;
      const context = {
        active_file: editor?.document.fileName,
        selection: editor?.selection
      };

      await this.connection.requestAgent(userRequest, context);
    }
  }

  // ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ í‘œì‹œ
  showEvent(event: AgentEvent): void {
    this.panel.webview.postMessage({
      command: 'agent-event',
      event: event
    });
  }
}
```

#### 2.2.3 ë³€ê²½ ì‚¬í•­ ì ìš©

**íŒŒì¼**: `src/commands/applyChanges.ts`

```typescript
export async function applyChanges(
  filePath: string,
  newContent: string,
  diff: string
): Promise<void> {

  // 1. Diff ë·°ì–´ë¡œ ë³€ê²½ ì‚¬í•­ í‘œì‹œ
  const userApproved = await showDiffView(filePath, diff);

  if (userApproved) {
    // 2. íŒŒì¼ ì—…ë°ì´íŠ¸
    const uri = vscode.Uri.file(filePath);
    const edit = new vscode.WorkspaceEdit();

    const document = await vscode.workspace.openTextDocument(uri);
    const fullRange = new vscode.Range(
      document.positionAt(0),
      document.positionAt(document.getText().length)
    );

    edit.replace(uri, fullRange, newContent);
    await vscode.workspace.applyEdit(edit);

    vscode.window.showInformationMessage(
      `âœ… ${path.basename(filePath)} ìˆ˜ì • ì™„ë£Œ!`
    );
  }
}

async function showDiffView(filePath: string, diff: string): Promise<boolean> {
  // VS Codeì˜ diff viewer ì‚¬ìš©
  const originalUri = vscode.Uri.file(filePath);
  const modifiedUri = vscode.Uri.file(filePath + '.ai-modified');

  // Diff í‘œì‹œ
  await vscode.commands.executeCommand(
    'vscode.diff',
    originalUri,
    modifiedUri,
    `AI Agent ë³€ê²½ì‚¬í•­: ${path.basename(filePath)}`
  );

  // ì‚¬ìš©ì ìŠ¹ì¸ ìš”ì²­
  const choice = await vscode.window.showQuickPick(
    ['ì ìš©', 'ì·¨ì†Œ'],
    { placeHolder: 'ë³€ê²½ì‚¬í•­ì„ ì ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?' }
  );

  return choice === 'ì ìš©';
}
```

### 2.3 Commands ë“±ë¡

**íŒŒì¼**: `package.json`

```json
{
  "contributes": {
    "commands": [
      {
        "command": "aiAgent.connect",
        "title": "AI Agent: ì„œë²„ ì—°ê²°"
      },
      {
        "command": "aiAgent.ask",
        "title": "AI Agent: ì½”ë“œ ìˆ˜ì • ìš”ì²­"
      },
      {
        "command": "aiAgent.askSelection",
        "title": "AI Agent: ì„ íƒ ì˜ì—­ ìˆ˜ì •"
      },
      {
        "command": "aiAgent.explain",
        "title": "AI Agent: ì½”ë“œ ì„¤ëª…"
      }
    ],
    "menus": {
      "editor/context": [
        {
          "command": "aiAgent.askSelection",
          "when": "editorHasSelection",
          "group": "aiAgent"
        }
      ]
    },
    "configuration": {
      "title": "AI Coding Agent",
      "properties": {
        "aiAgent.serverUrl": {
          "type": "string",
          "default": "ws://localhost:8000",
          "description": "AI Agent ì„œë²„ URL"
        },
        "aiAgent.autoApply": {
          "type": "boolean",
          "default": false,
          "description": "ë³€ê²½ì‚¬í•­ ìë™ ì ìš© (í™•ì¸ ì—†ì´)"
        }
      }
    }
  }
}
```

---

## ğŸ“‹ Phase 3: í†µí•© ë° í…ŒìŠ¤íŠ¸ (Week 4)

### 3.1 í†µí•© ì‹œë‚˜ë¦¬ì˜¤

**ì‹œë‚˜ë¦¬ì˜¤ 1: ë‹¨ì¼ íŒŒì¼ ìˆ˜ì •**
```
1. VS Codeì—ì„œ íŒŒì¼ ì—´ê¸° (main.py)
2. Cmd+Shift+P â†’ "AI Agent: ì½”ë“œ ìˆ˜ì • ìš”ì²­"
3. ì…ë ¥: "íƒ€ì… íŒíŠ¸ ì¶”ê°€í•´ì¤˜"
4. Agentê°€ ë¶„ì„ ë° ìˆ˜ì •
5. Diff ë·°ì–´ë¡œ ë³€ê²½ì‚¬í•­ í™•ì¸
6. "ì ìš©" í´ë¦­ â†’ íŒŒì¼ ì—…ë°ì´íŠ¸
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: ì„ íƒ ì˜ì—­ ìˆ˜ì •**
```
1. ì½”ë“œ ì¼ë¶€ ì„ íƒ (í•¨ìˆ˜ í•˜ë‚˜)
2. ìš°í´ë¦­ â†’ "AI Agent: ì„ íƒ ì˜ì—­ ìˆ˜ì •"
3. ì…ë ¥: "ì´ í•¨ìˆ˜ ë¦¬íŒ©í† ë§í•´ì¤˜"
4. Agentê°€ í•´ë‹¹ í•¨ìˆ˜ë§Œ ìˆ˜ì •
5. ë³€ê²½ì‚¬í•­ ì ìš©
```

**ì‹œë‚˜ë¦¬ì˜¤ 3: í”„ë¡œì íŠ¸ ì „ì²´ ë¶„ì„**
```
1. "AI Agent: ì„œë²„ ì—°ê²°"
2. ì „ì²´ í”„ë¡œì íŠ¸ íŒŒì¼ ì—…ë¡œë“œ
3. ì…ë ¥: "í”„ë¡œì íŠ¸ì˜ ëª¨ë“  í•¨ìˆ˜ì— docstring ì¶”ê°€"
4. Agentê°€ ì—¬ëŸ¬ íŒŒì¼ ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜ì •
5. ê° íŒŒì¼ë³„ë¡œ diff í™•ì¸ ë° ì ìš©
```

### 3.2 ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

**í´ë¼ì´ì–¸íŠ¸ ë³´ì•ˆ:**
```typescript
// ë¯¼ê°í•œ íŒŒì¼ í•„í„°ë§
const BLOCKED_FILES = [
  '.env', '.env.*',
  '*.key', '*.pem',
  'credentials.*',
  'secrets.*'
];

function shouldUploadFile(filePath: string): boolean {
  return !BLOCKED_FILES.some(pattern =>
    minimatch(filePath, pattern)
  );
}
```

**ì„œë²„ ë³´ì•ˆ:**
```python
# ì„¸ì…˜ ê²©ë¦¬
# - ê° í´ë¼ì´ì–¸íŠ¸ë§ˆë‹¤ ë…ë¦½ëœ workspace
# - ë‹¤ë¥¸ ì„¸ì…˜ì˜ íŒŒì¼ ì ‘ê·¼ ë¶ˆê°€

# íŒŒì¼ í¬ê¸° ì œí•œ
MAX_FILE_SIZE = 1 * 1024 * 1024  # 1MB
MAX_TOTAL_SIZE = 10 * 1024 * 1024  # 10MB per session

# Rate limiting
# - í´ë¼ì´ì–¸íŠ¸ë‹¹ ë¶„ë‹¹ 10 ìš”ì²­ ì œí•œ
```

### 3.3 ì—ëŸ¬ ì²˜ë¦¬

**ì—°ê²° ëŠê¹€:**
```typescript
// ìë™ ì¬ì—°ê²°
private reconnect(): void {
  this.reconnectAttempts++;
  if (this.reconnectAttempts < MAX_RETRIES) {
    setTimeout(() => this.connect(), RETRY_DELAY);
  }
}
```

**íƒ€ì„ì•„ì›ƒ:**
```typescript
// 30ì´ˆ íƒ€ì„ì•„ì›ƒ
const timeout = setTimeout(() => {
  this.ws.close();
  vscode.window.showErrorMessage(
    'AI Agent ì‘ë‹µ ì‹œê°„ ì´ˆê³¼'
  );
}, 30000);
```

---

## ğŸ“Š êµ¬í˜„ ì¼ì •

| Week | Task | Deliverable |
|------|------|-------------|
| 1 | ì„œë²„ í™•ì¥ | SessionManager, WebSocket API |
| 2 | Extension ê¸°ë³¸ êµ¬ì¡° | ì—°ê²°, íŒŒì¼ ë™ê¸°í™” |
| 3 | UI ë° Commands | Panel, Diff viewer |
| 4 | í†µí•© í…ŒìŠ¤íŠ¸ | E2E í…ŒìŠ¤íŠ¸, ë¬¸ì„œ |

---

## ğŸ¯ ìµœì¢… ì‚¬ìš©ì ê²½í—˜

**ì„¤ì¹˜:**
```bash
# VS Code Marketplaceì—ì„œ ì„¤ì¹˜
# ë˜ëŠ”
code --install-extension ai-coding-agent.vsix
```

**ì‚¬ìš©:**
```
1. Settingsì—ì„œ ì„œë²„ URL ì„¤ì •
2. Cmd+Shift+P â†’ "AI Agent: ì„œë²„ ì—°ê²°"
3. ì½”ë“œ ì„ íƒ í›„ ìš°í´ë¦­ â†’ "AI Agent: ì„ íƒ ì˜ì—­ ìˆ˜ì •"
4. ìš”ì²­ ì…ë ¥: "ë¦¬íŒ©í† ë§í•´ì¤˜"
5. Diff í™•ì¸ í›„ ì ìš©
```

**ì‹¤ì‹œê°„ í”¼ë“œë°±:**
```
[Status Bar]  ğŸ¤– AI Agent ì‘ë™ ì¤‘... (2/5 íŒŒì¼)

[Side Panel]
ğŸ“ ì§„í–‰ ìƒí™©
  âœ… main.py ë¶„ì„ ì™„ë£Œ
  â³ utils.py ìˆ˜ì • ì¤‘...
  â¸ï¸  test.py ëŒ€ê¸° ì¤‘
```

---

## ğŸ’¡ í–¥í›„ ê°œì„  ì‚¬í•­

### Phase 2 ê¸°ëŠ¥
- **Chat UI**: ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤
- **History**: ì´ì „ ìˆ˜ì • ë‚´ì—­ í™•ì¸
- **Undo**: AI ìˆ˜ì • ë˜ëŒë¦¬ê¸°
- **Snippets**: ìì£¼ ì“°ëŠ” ìš”ì²­ ì €ì¥

### Phase 3 ê¸°ëŠ¥
- **Team Sharing**: íŒ€ì›ê³¼ Agent ê³µìœ 
- **Custom Tools**: ì‚¬ìš©ì ì •ì˜ ë„êµ¬ ì¶”ê°€
- **Ollama ë¡œì»¬ ì‹¤í–‰**: ì„œë²„ ì—†ì´ ë¡œì»¬ ì‚¬ìš©

---

## ğŸ“¦ ê¸°ìˆ  ìŠ¤íƒ

**ì„œë²„:**
- Python 3.11+
- FastAPI
- WebSocket
- Ollama

**Extension:**
- TypeScript
- VS Code Extension API
- React (WebView UI)
- WebSocket Client

---

## ğŸš€ ì‹œì‘í•˜ê¸°

ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•  ì¤€ë¹„ê°€ ë˜ì…¨ë‚˜ìš”?

1. **Phase 1 ì‹œì‘**: ì„œë²„ SessionManager êµ¬í˜„
2. **Extension í…œí”Œë¦¿**: VS Code Extension í”„ë¡œì íŠ¸ ìƒì„±
3. **í”„ë¡œí† íƒ€ì…**: ê¸°ë³¸ ì—°ê²° ë° íŒŒì¼ ë™ê¸°í™”

ì–´ë–¤ ê²ƒë¶€í„° ì‹œì‘í• ê¹Œìš”?
